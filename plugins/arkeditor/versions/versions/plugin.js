/**
 * @license Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
(function(){var t={readOnly:1,exec:function(n){var u=n.editable(),f=n.config.versionsURL||u.getCustomData("versionsURL"),t=null,e=null,o,i,r,s,h;n.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(o=u.getCustomData("itemId"),i="com_content.content",itemtype=="module"?(i="com_modules.custom",r=u.getCustomData("modTypeId")):r=itemtype=="category"?6:1,r==6&&(i="com_content.category"),f=f.replace(/\[ITEM_ID\]/,o).replace(/\[TYPE_ID\]/,r).replace(/\[ITEM_TYPE\]/,i),t=CKEDITOR.document.getById("sbox-window"),t&&(e=CKEDITOR.document.getById("sbox-overlay"),n.focusManager.add(t,1),n.focusManager.add(e,1)));s=f;SqueezeBox.open(null,{handler:"iframe",size:{x:800,y:500},url:s});n.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(h=function(){t&&(n.focusManager.remove(t,1),n.focusManager.remove(e,1))},SqueezeBox.addEvent("onClose",function(){h();this.removeEvents("onClose")}))}},n="versions";CKEDITOR.plugins.add(n,{icons:"versions",hidpi:!1,init:function(i){var u=i.element,f=u.getAttribute("data-itemType"),r;(f!="module"||i.config.enableModuleHistory)&&(r=i.addCommand(n,t),r.modes={wysiwyg:1},i.ui.addButton&&i.ui.addButton("Versions",{label:"Versions",command:n}))}})})()