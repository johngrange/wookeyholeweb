/**
 * @license Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
(function(){function n(n,t,i){var r=n.join(" "),o,f,e,u;for(r=r.replace(/(,|>|\+|~)/g," "),r=r.replace(/\[[^\]]*/g,""),r=r.replace(/\:{1,2}[^\s]*/g,""),r=r.replace(/\]/g,""),r=r.replace(/\s+/g," "),o=r.split(" "),f=[],e=0;e<o.length;e++)u=o[e],i.test(u)&&!t.test(u)&&CKEDITOR.tools.indexOf(f,u)==-1&&f.push(u);return f}function t(t,i,r,u){for(var y=[],p=[],e,w,c,b,k,v,h,s,d,f=0;f<i.styleSheets.length;f++)if(e=i.styleSheets[f],e){if(w=e.ownerNode||e.owningElement,c=!1,t.config.stylesheets)for(h=0;h<t.config.stylesheets.length;h++)if(b=t.config.stylesheets[f],k=new RegExp("/"+b+"[w|.]+.css$"),c=k.test(e.href),c)break;if(!c&&!w.getAttribute("data-cke-temp")&&(!e.href||e.href.substr(0,9)!="chrome://"))try{for(v=e.cssRules||e.rules,h=0;h<v.length;h++)p.push(v[h].selectorText)}catch(g){}}for(s=n(p,r,u),f=0;f<s.length;f++){var l="p",o="",a="class";if(s[f].charAt(0)=="."||s[f].charAt(0)=="#"){if(o=s[f].substr(1),element=l,s[f].charAt(0)=="#"&&(a="id"),o.match(/[\.#]/))continue;if(o.match(/icon\-/))continue}else l=s[f].split(/[\.|#]/),element=l[0].toLowerCase(),o=l[1],/^w+?#w+/.test(s[f])&&(a="id");o&&o!="."&&o!="#"&&(attributes={},attributes[a]=o,d=element+(a=="id"?"#":".")+o,y.push({name:d,element:element,attributes:attributes}))}return y}CKEDITOR.plugins.add("autostylesheetparser",{init:function(n){n.filter.disable();n.once("stylesSet",function(i){i.cancel();n.once("contentDom",function(){var i=function(){n.getStylesSet(function(i){var u=n.config.stylesheetParser_skipSelectors||/(^body\.|^\.)/i,f=n.config.stylesheetParser_validSelectors||/\w+\.\w+/,r=i.concat(t(n,n.document.$,u,f));n.getStylesSet=function(n){if(r)return n(r)};n.fire("stylesSet",{styles:r})})};CKEDITOR.env.gecko||CKEDITOR.env.ie?setTimeout(function(){i.apply()},300):i.apply()})},null,null,1)}})})()