/**
 * @license Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
(function(){"use strict";CKEDITOR.ICON=4;var n=CKEDITOR.ui.panel.block.prototype;CKEDITOR.ui.panel.block=function(n,t){this.element=n.append(n.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));t&&CKEDITOR.tools.extend(this,t);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"],"data-id":this.attributes["data-id"]||""});this.keys={};var i=this._||(this._={});i.markItem=function(n){if(n!=-1){var i=this.element.getElementsByTag("a"),t=i.getItem(this._.focusIndex=n);CKEDITOR.env.webkit&&t.getDocument().getWindow().focus();t.focus();this.onMark&&this.onMark(t)}};i.focusIndex=-1;this.element.disableContextMenu()};CKEDITOR.ui.panel.block.prototype=n;CKEDITOR.plugins.add("styles",{requires:"richcombo",init:function(n){var f=n.config,t=n.lang.stylescombo,i={},u=[],e=[],o=[],s=[],h=[],r,c=[],l;n.on("stylesSet",function(t){var y=t.data.styles,r,l,p,a,w,v;if(y){for(a=0,w=y.length;a<w;a++)if((v=y[a],!n.blockless||!(v.element in CKEDITOR.dtd.$block))&&(l=v.name,r=new CKEDITOR.style(v),!n.filter.customConfig||n.filter.check(r))){r._name=l;r._.enterMode=f.enterMode;r._.type=p=r.assignedTo||r.type;l.indexOf("icon")!=-1&&(r._.type=p=CKEDITOR.ICON);i[l]=r;switch(p){case CKEDITOR.STYLE_OBJECT:e.push(r);break;case CKEDITOR.STYLE_BLOCK:o.push(r);break;case CKEDITOR.STYLE_INLINE:s.push(r);break;default:h.push(r)}c.push(r)}return u=e.concat(o).concat(s).concat(h),!1}});l={label:t.label,title:t.panelTitle,toolbar:"styles,10",allowedContent:c,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),multiSelect:!0,attributes:{"aria-label":t.panelTitle,"data-id":"styles"}},init:function(){for(var n,r,e,i,f=0,o=u.length;f<o;f++)n=u[f],r=n._name,i=n._.type,i!=e&&(i==4?this.startGroup("Icon Styles"):this.startGroup(t["panelTitle"+String(i)]),e=i),this.add(r,n.type==CKEDITOR.STYLE_OBJECT?r:n.buildPreview(),r);this.commit()},onClick:function(t){n.focus();n.fire("saveSnapshot");var r=i[t],u=n.elementPath();n[r.checkActive(u,n)?"removeStyle":"applyStyle"](r);n.fire("saveSnapshot")},onRender:function(){n.on("selectionChange",function(t){for(var r,o=this.getValue(),s=t.data.path,f=s.elements,u=0,h=f.length,e;u<h;u++){e=f[u];for(r in i)if(i[r].checkElementRemovable(e,!0,n)){r!=o&&this.setValue(r);return}}this.setValue("")},this)},onOpen:function(){var r=n.getSelection(),u=r.getSelectedElement(),f=n.elementPath(u),i=[0,0,0,0];this.showAll();this.unmarkAll();i[CKEDITOR.STYLE_BLOCK]||this.hideGroup(t["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);i[CKEDITOR.STYLE_INLINE]||this.hideGroup(t["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);i[CKEDITOR.STYLE_s]||this.hideGroup(t["panelTitle"+String(CKEDITOR.STYLE_OBJECT)]);i[CKEDITOR.ICON]||this.hideGroup("Icon Styles")},refresh:function(){var t=n.elementPath(),r,u;if(t){for(r in i)if(u=i[r],u.checkApplicable(t,n,n.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){r&&(delete r._.panel,delete r._.list,r._.committed=0,r._.items={},r._.state=CKEDITOR.TRISTATE_OFF);i={};u=[]}};n.ui.addRichCombo("Styles",l)}})})()