"use strict";define("requests-controller",["ng-table"],function(){var e=function(e,t,i,s,r){var u=this,a=e.requestsCtrl;a.firstTime=true;a.requestsTable=new r({count:window.xtListLimit},{total:0,counts:[],getData:function(e,i){a.waiting=true;s.query({taskCommand:"browse",ajax:1,boxchecked:0,hidemainmenu:0,filter_order:"publish_up",filter_order_Dir:"ASC",limitstart:0,limit:window.xtListLimit,publish_up:0,search:"",plugin:0,published:0},function(i){t(function(){a.waiting=false;e.resolve(i);if(a.firstTime){a.firstTime=false;u.loadReqParam(i)}},500)})}});u.loadReqParam=function(e){var t=u.getQueryParams("req-id");if(!t){return false}e.$promise.then(function(e){var s=0;i.$emit("editRequest",t);_.each(e,function(i){if(i.id==t){e[s].$selected=true}s++})})};a.requestsTable.doRefresh=function(){a.requestsTable.reload()};a.requestsTable.selectRow=function(e){for(var t=0;t<a.requestsTable.data.length;t++){a.requestsTable.data[t].$selected=false}e.$selected=true};a.requestsTable.editRow=function(e){i.$emit("editRequest",e.id)};a.requestsTable.publishRow=function(e){i.$emit("publishRequest",e.id)};a.requestsTable.cancelRow=function(e){i.$emit("cancelRequest",e.id)};a.requestsTable.backtoQueueRow=function(e){i.$emit("backtoQueueRequest",e.id)};u.getQueryParams=function(e){var t=window.location.search.substring(1);var i=_.chain(t.split("&")).map(function(e){var t=e.split("=");return[t[0],decodeURIComponent(t[1])]}).object().value();return i[e]};i.$on("newRequest",a.requestsTable.doRefresh)};e.$inject=["$scope","$timeout","$rootScope","Request","ngTableParams"];return e});
